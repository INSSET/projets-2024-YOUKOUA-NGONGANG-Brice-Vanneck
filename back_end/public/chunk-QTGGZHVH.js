import{N as q,O as z,b as W,c as h,e as V,f as B,g as v,i as O,j as D,k as A,m as k,n as G,o as U,p as y,y as C}from"./chunk-WUVQUOI7.js";import{Eb as _,K as s,L as d,P as R,Ta as F,V as T,Wa as j,X as p,_a as K,ba as i,ca as n,da as u,ia as E,ib as x,lb as L,mb as P,ob as X,p as b,ra as a,s as S,u as w,v as M,va as g,wa as c,xa as f,ya as I,za as N}from"./chunk-CMY6TK2A.js";function re(o,H){o&1&&(i(0,"span"),a(1,"Connexion "),u(2,"i",20),n())}function ne(o,H){o&1&&(i(0,"div"),u(1,"span",21),a(2," Chargement... "),n())}var Q=(()=>{class o{constructor(m,r,e,l,t){this.document=m,this.renderer=r,this.authService=e,this.messageService=l,this.router=t,this.title=S(x),this.submitting=!1,this.login={username:"",password:""},this.formBuilder=S(k),this.authform=this.formBuilder.group({username:new v("",[h.required]),password:new v("",[h.required])})}ngOnInit(){this.renderer.addClass(this.document.body,"bg-auth"),this.title.setTitle("Connexion")}ngOnDestroy(){this.renderer.removeClass(this.document.body,"bg-auth")}onSubmit(){this.submitting=!0,this.authService.login(this.login).subscribe({next:m=>{console.log("Statut HTTP :",m.status),console.log("Body de la r\xE9ponse :",m.body);let r=m.body;r.email="",r.roles="";let e={email:"",roles:[],token:r.token,refresh_token:r.refresh_token};_.connect(e),this.authService.getCurentUser().subscribe(l=>{let t=_.getUser();t.email=l.email,t.roles=l.roles,t.id=l.id,console.log(t),_.disconect(),this.messageService.add({severity:"success",summary:"Acc\xE8s autoris\xE9 !",detail:"Connexion r\xE9ussi",life:3e3}),_.connect(t),this.router.navigateByUrl("/apiculteur"),this.submitting=!1})},error:m=>{this.submitting=!1,this.messageService.add({severity:"error",summary:"Informations incorrectes !",detail:"Verifier votre login ou votre mot de passe",life:3e3})}})}static{this.\u0275fac=function(r){return new(r||o)(d(F),d(R),d(y),d(C),d(L))}}static{this.\u0275cmp=w({type:o,selectors:[["app-login"]],standalone:!0,features:[I([y,C]),N],decls:29,vars:7,consts:[[1,"login-area","py-120","auth"],[1,"container"],[1,"col-md-5","mx-auto"],[1,"contact_form_box_all","type_five"],[1,"contact_form_box_inner","simple_form"],[1,"login-header","logo","text-center"],["src","../../../../assets_files/logo.png","width","100","height","100","alt",""],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","formControlName","username","id","email","placeholder","Votre email",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],["type","password","formControlName","password","id","password","placeholder","Votre mot de passe",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","mb-4"],[1,"d-flex","mt-4","justify-content-center","align-items-center"],["type","submit",1,"w-100",3,"disabled"],[4,"ngIf"],[1,"login-footer"],["routerLink","/auth/inscription"],["position","center",3,"showTransformOptions"],[1,"pi","pi-sign-in"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"]],template:function(r,e){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),u(6,"img",6),i(7,"p"),a(8,"Veuillez vous connecter avec vos identifiants"),n()(),i(9,"form",7),E("ngSubmit",function(){return e.onSubmit()}),i(10,"div",8)(11,"label",9),a(12,"Email"),n(),i(13,"input",10),f("ngModelChange",function(t){return c(e.login.username,t)||(e.login.username=t),t}),n()(),i(14,"div",8)(15,"label",11),a(16,"Mot de passe"),n(),i(17,"input",12),f("ngModelChange",function(t){return c(e.login.password,t)||(e.login.password=t),t}),n()(),u(18,"div",13),i(19,"div",14)(20,"button",15),T(21,re,3,0,"span",16)(22,ne,3,0,"div",16),n()()(),i(23,"div",17)(24,"p"),a(25,"Vous n'avez pas de compte? "),i(26,"a",18),a(27,"Inscription."),n()()()()()()()(),u(28,"p-toast",19)),r&2&&(s(9),p("formGroup",e.authform),s(4),g("ngModel",e.login.username),s(4),g("ngModel",e.login.password),s(3),p("disabled",e.submitting||e.authform.invalid),s(),p("ngIf",!e.submitting),s(),p("ngIf",e.submitting),s(6),p("showTransformOptions","translateX(100%)"))},dependencies:[P,U,O,W,V,B,D,A,G,j,z,q],styles:[".auth[_ngcontent-%COMP%]{margin-top:35px}"]})}}return o})();function se(o,H){o&1&&(i(0,"span"),a(1," S'inscrire "),u(2,"i",19),n())}function ae(o,H){o&1&&(i(0,"div"),u(1,"span",20),a(2," Chargement... "),n())}var Y=(()=>{class o{constructor(m,r,e,l,t){this.document=m,this.renderer=r,this.router=e,this.authService=l,this.messageService=t,this.title=S(x),this.Register={email:"",numero:"",nom:"",password:"",confirmPassword:""},this.formBuilder=S(k),this.submitting=!1,this.registerForm=this.formBuilder.group({nom:new v("",[h.required]),email:new v("",[h.pattern("^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$")]),password:new v("",[h.required]),confirmPassword:new v("",[h.required])}),this.title.setTitle("Inscription")}ngOnInit(){this.renderer.addClass(this.document.body,"bg-auth")}ngOnDestroy(){this.renderer.removeClass(this.document.body,"bg-auth")}onSubmit(){this.submitting=!0,console.log(this.Register);let m={email:this.Register.email,nom:this.Register.nom,password:this.Register.password,roles:["ROLE_USER"]};this.authService.register(m).subscribe({next:r=>{console.log("Statut HTTP :",r.status),console.log("Body de la r\xE9ponse :",r.body),this.messageService.add({severity:"success",summary:"inscription r\xE9ussi !",detail:"Veuillez verifier vos mail pour continuer",life:2e3}),this.submitting=!1,setTimeout(()=>{this.router.navigate(["/auth/connexion"])},2e3)},error:r=>{this.submitting=!1,this.submitting=!1,this.messageService.add({severity:"error",summary:"Informations incorrectes !",detail:"un probl\xE8me a \xE9t\xE9 rencontr\xE9 ",life:3e3})}})}static{this.\u0275fac=function(r){return new(r||o)(d(F),d(R),d(L),d(y),d(C))}}static{this.\u0275cmp=w({type:o,selectors:[["app-register"]],standalone:!0,features:[I([C,y]),N],decls:36,vars:9,consts:[[1,"login-area","py-120","auth"],[1,"container"],[1,"col-md-5","mx-auto"],[1,"contact_form_box_all","type_five"],[1,"contact_form_box_inner","simple_form"],[1,"login-header","logo","text-center"],["src","../../../../assets_files/logo.png","width","100","height","100","alt",""],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","nom","placeholder","Votre nom complet",1,"form-control",3,"ngModelChange","ngModel"],["type","email","formControlName","email","placeholder","Votre adresse mail",1,"form-control",3,"ngModelChange","ngModel"],["type","password","formControlName","password","placeholder","Votre mot de passe",1,"form-control",3,"ngModelChange","ngModel"],["type","password","formControlName","confirmPassword","placeholder","Confirmation de votre mot de pasee",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center"],["type","submit",1,"theme-btn","w-100",3,"disabled"],[4,"ngIf"],[1,"login-footer"],["routerLink","/auth/connexion"],["position","center",3,"showTransformOptions"],[1,"pi","pi-sign-in"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"]],template:function(r,e){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),u(6,"img",6),i(7,"p"),a(8,"Cr\xE9ation de votre compte"),n()(),i(9,"form",7),E("ngSubmit",function(){return e.onSubmit()}),i(10,"div",8)(11,"label"),a(12,"Votre nom complet"),n(),i(13,"input",9),f("ngModelChange",function(t){return c(e.Register.nom,t)||(e.Register.nom=t),t}),n()(),i(14,"div",8)(15,"label"),a(16,"Email"),n(),i(17,"input",10),f("ngModelChange",function(t){return c(e.Register.email,t)||(e.Register.email=t),t}),n()(),i(18,"div",8)(19,"label"),a(20,"Mot de passe"),n(),i(21,"input",11),f("ngModelChange",function(t){return c(e.Register.password,t)||(e.Register.password=t),t}),n()(),i(22,"div",8)(23,"label"),a(24,"Confirmation de votre mot de passe"),n(),i(25,"input",12),f("ngModelChange",function(t){return c(e.Register.confirmPassword,t)||(e.Register.confirmPassword=t),t}),n()(),i(26,"div",13)(27,"button",14),T(28,se,3,0,"span",15)(29,ae,3,0,"div",15),n()()(),i(30,"div",16)(31,"p"),a(32,"Vous avez d\xE9j\xE0 un compte? "),i(33,"a",17),a(34,"Connexion."),n()()()()()()()(),u(35,"p-toast",18)),r&2&&(s(9),p("formGroup",e.registerForm),s(4),g("ngModel",e.Register.nom),s(4),g("ngModel",e.Register.email),s(4),g("ngModel",e.Register.password),s(4),g("ngModel",e.Register.confirmPassword),s(2),p("disabled",e.submitting||e.registerForm.invalid),s(),p("ngIf",!e.submitting),s(),p("ngIf",e.submitting),s(6),p("showTransformOptions","translateX(100%)"))},dependencies:[P,U,O,W,V,B,D,A,G,z,q,j],styles:[".auth[_ngcontent-%COMP%]{margin-top:20px}"]})}}return o})();var me=[{path:"connexion",component:Q},{path:"inscription",component:Y}],Z=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=M({type:o})}static{this.\u0275inj=b({imports:[X.forChild(me),X]})}}return o})();var Oe=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=M({type:o})}static{this.\u0275inj=b({imports:[K,Z]})}}return o})();export{Oe as AuthModule};
