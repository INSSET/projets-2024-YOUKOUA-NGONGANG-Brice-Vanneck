import{N as O,O as k,b as N,c as h,e as F,f as I,g as v,i as j,j as L,k as W,m as x,n as P,o as V,p as B,y as D}from"./chunk-J5NW2D5D.js";import{Db as T,K as s,L as p,P as S,Ta as R,V as U,Wa as z,X as u,_a as H,ba as i,ca as r,da as d,ia as M,kb as X,lb as E,nb as A,p as y,ra as a,s as C,u as w,v as _,va as g,wa as c,xa as f,ya as q,za as b}from"./chunk-O4O64XCO.js";function ee(o,Y){o&1&&(i(0,"span"),a(1,"Connexion "),d(2,"i",20),r())}function te(o,Y){o&1&&(i(0,"div"),d(1,"span",21),a(2," Chargement... "),r())}var J=(()=>{class o{constructor(m,n,e,l,t){this.document=m,this.renderer=n,this.authService=e,this.messageService=l,this.router=t,this.submitting=!1,this.login={username:"",password:""},this.formBuilder=C(x),this.authform=this.formBuilder.group({username:new v("",[h.required]),password:new v("",[h.required])})}ngOnInit(){this.renderer.addClass(this.document.body,"bg-auth")}ngOnDestroy(){this.renderer.removeClass(this.document.body,"bg-auth")}onSubmit(){this.submitting=!0,this.authService.login(this.login).subscribe({next:m=>{console.log("Statut HTTP :",m.status),console.log("Body de la r\xE9ponse :",m.body);let n=m.body;n.email="",n.roles="";let e={email:"",roles:[],token:n.token,refresh_token:n.refresh_token};T.connect(e),this.authService.getCurentUser().subscribe(l=>{let t=T.getUser();t.email=l.email,t.roles=l.roles,console.log(t),this.messageService.add({severity:"success",summary:"Acc\xE8s autoris\xE9 !",detail:"Connexion r\xE9ussi",life:3e3}),T.connect(t),this.router.navigateByUrl("/apiculteur"),this.submitting=!1})},error:m=>{this.submitting=!1,this.messageService.add({severity:"error",summary:"Informations incorrectes !",detail:"Verifier votre login ou votre mot de passe",life:3e3})}})}static{this.\u0275fac=function(n){return new(n||o)(p(R),p(S),p(B),p(D),p(X))}}static{this.\u0275cmp=w({type:o,selectors:[["app-login"]],standalone:!0,features:[q([B,D]),b],decls:29,vars:7,consts:[[1,"login-area","py-120","auth"],[1,"container"],[1,"col-md-5","mx-auto"],[1,"contact_form_box_all","type_five"],[1,"contact_form_box_inner","simple_form"],[1,"login-header","logo","text-center"],["src","assets/logo.png","width","100","height","100","alt",""],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","formControlName","username","id","email","placeholder","Votre email",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],["type","password","formControlName","password","id","password","placeholder","Votre mot de passe",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","mb-4"],[1,"d-flex","mt-4","justify-content-center","align-items-center"],["type","submit",1,"w-100",3,"disabled"],[4,"ngIf"],[1,"login-footer"],["routerLink","/auth/inscription"],["position","center",3,"showTransformOptions"],[1,"pi","pi-sign-in"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),d(6,"img",6),i(7,"p"),a(8,"Veuillez vous connecter avec vos identifiants"),r()(),i(9,"form",7),M("ngSubmit",function(){return e.onSubmit()}),i(10,"div",8)(11,"label",9),a(12,"Email"),r(),i(13,"input",10),f("ngModelChange",function(t){return c(e.login.username,t)||(e.login.username=t),t}),r()(),i(14,"div",8)(15,"label",11),a(16,"Mot de passe"),r(),i(17,"input",12),f("ngModelChange",function(t){return c(e.login.password,t)||(e.login.password=t),t}),r()(),d(18,"div",13),i(19,"div",14)(20,"button",15),U(21,ee,3,0,"span",16)(22,te,3,0,"div",16),r()()(),i(23,"div",17)(24,"p"),a(25,"Vous n'avez pas de compte? "),i(26,"a",18),a(27,"Inscription."),r()()()()()()()(),d(28,"p-toast",19)),n&2&&(s(9),u("formGroup",e.authform),s(4),g("ngModel",e.login.username),s(4),g("ngModel",e.login.password),s(3),u("disabled",e.submitting||e.authform.invalid),s(),u("ngIf",!e.submitting),s(),u("ngIf",e.submitting),s(6),u("showTransformOptions","translateX(100%)"))},dependencies:[E,V,j,N,F,I,L,W,P,z,k,O],styles:[".auth[_ngcontent-%COMP%]{margin-top:35px}"]})}}return o})();var K=(()=>{class o{constructor(m,n){this.document=m,this.renderer=n,this.Register={email:"",numero:"",nom:"",password:"",confirmPassword:""},this.formBuilder=C(x),this.submitting=!1,this.registerForm=this.formBuilder.group({nom:new v("",[h.required]),email:new v("",[h.pattern("^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$")]),password:new v("",[h.required]),confirmPassword:new v("",[h.required])})}ngOnInit(){this.renderer.addClass(this.document.body,"bg-auth")}ngOnDestroy(){this.renderer.removeClass(this.document.body,"bg-auth")}onSubmit(){}static{this.\u0275fac=function(n){return new(n||o)(p(R),p(S))}}static{this.\u0275cmp=w({type:o,selectors:[["app-register"]],standalone:!0,features:[b],decls:36,vars:6,consts:[[1,"login-area","py-120","auth"],[1,"container"],[1,"col-md-5","mx-auto"],[1,"contact_form_box_all","type_five"],[1,"contact_form_box_inner","simple_form"],[1,"login-header","logo","text-center"],["src","assets/logo.png","width","100","height","100","alt",""],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","nom","placeholder","Votre nom complet",1,"form-control",3,"ngModelChange","ngModel"],["type","email","formControlName","email","placeholder","Votre adresse mail",1,"form-control",3,"ngModelChange","ngModel"],["type","password","formControlName","password","placeholder","Votre mot de passe",1,"form-control",3,"ngModelChange","ngModel"],["type","password","formControlName","confirmPassword","placeholder","Confirmation de votre mot de pasee",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center"],["type","submit",1,"theme-btn","w-100"],[1,"pi","pi-sign-in"],[1,"login-footer"],["routerLink","/auth/connexion"],["position","center",3,"showTransformOptions"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),d(6,"img",6),i(7,"p"),a(8,"Cr\xE9ation de votre compte"),r()(),i(9,"form",7),M("ngSubmit",function(){return e.onSubmit()}),i(10,"div",8)(11,"label"),a(12,"Votre nom complet"),r(),i(13,"input",9),f("ngModelChange",function(t){return c(e.Register.nom,t)||(e.Register.nom=t),t}),r()(),i(14,"div",8)(15,"label"),a(16,"Email"),r(),i(17,"input",10),f("ngModelChange",function(t){return c(e.Register.email,t)||(e.Register.email=t),t}),r()(),i(18,"div",8)(19,"label"),a(20,"Mot de passe"),r(),i(21,"input",11),f("ngModelChange",function(t){return c(e.Register.password,t)||(e.Register.password=t),t}),r()(),i(22,"div",8)(23,"label"),a(24,"Confirmation de votre mot de passe"),r(),i(25,"input",12),f("ngModelChange",function(t){return c(e.Register.confirmPassword,t)||(e.Register.confirmPassword=t),t}),r()(),i(26,"div",13)(27,"button",14),a(28," S'inscrire "),d(29,"i",15),r()()(),i(30,"div",16)(31,"p"),a(32,"Vous avez d\xE9j\xE0 un compte? "),i(33,"a",17),a(34,"Connexion."),r()()()()()()()(),d(35,"p-toast",18)),n&2&&(s(9),u("formGroup",e.registerForm),s(4),g("ngModel",e.Register.nom),s(4),g("ngModel",e.Register.email),s(4),g("ngModel",e.Register.password),s(4),g("ngModel",e.Register.confirmPassword),s(10),u("showTransformOptions","translateX(100%)"))},dependencies:[E,V,j,N,F,I,L,W,P,k,O],styles:[".auth[_ngcontent-%COMP%]{margin-top:20px}"]})}}return o})();var ie=[{path:"connexion",component:J},{path:"inscription",component:K}],Q=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=_({type:o})}static{this.\u0275inj=y({imports:[A.forChild(ie),A]})}}return o})();var je=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=_({type:o})}static{this.\u0275inj=y({imports:[H,Q]})}}return o})();export{je as AuthModule};
